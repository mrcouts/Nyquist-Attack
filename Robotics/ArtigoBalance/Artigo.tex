%*******************************************************************************************%
%            	DYNAMIC MODELLING AND CONTROL OF BALANCED PARALLEL MECHANISMS           	%
% 																					   		%
% April 26, 2015														 						%
% Authors: Andre G. Coutinho, Tarcisio A. H. Coelho					%
% bash adaptive.sh							 												%
% 																							%
%*******************************************************************************************%



%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,11pt,brazil,fleqn]{article}
\synctex=1
%%%%%%%%%%%%%%%%%%%%%%

% \usepackage{natbib}
\usepackage[english]{babel}
% \usepackage{amsmath,amssymb,amsthm,amsfonts,textcomp}
% \usepackage{eucal,eufrak,mathrsfs,bbm,stmaryrd}
\usepackage{color}
\usepackage{amsthm}
\usepackage{array,hhline,supertabular}
\usepackage[colorlinks,citecolor=black,urlcolor=black,linkcolor=black]{hyperref}
\usepackage[pdftex]{graphicx}
\usepackage{multicol}
\usepackage[symbol]{footmisc}
\usepackage{enumitem}
\usepackage{float}
\usepackage{titlesec}
\usepackage{nomencl}
\usepackage{EXTRAS/special-char}
\usepackage{EXTRAS/special-conf}
\usepackage{subfigure}

\graphicspath{{FIGURES/}{../FIGURES/}}
\makenomenclature


%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
%%%%%%%%%%%%%%%%%%%%%%

\noindent
{\bf \huge A new approach for designing dynamic balanced serial mechanisms}\\

\noindent
{\Large 		Andr\'e Garnier Coutinho$\,{}^\text{a}$,
			Tarcisio Antonio Hess Coelho$\,{}^\text{b}$
}\\

\noindent
{${}^\text{a}$ \it Department of Mechatronics and Mechanical Systems Engineering, Escola Politecnica, 
University of Sao Paulo, Brazil. E-mail: andre.garnier.coutinho@usp.br}

\noindent
{${}^\text{b}$ \it Department of Mechatronics and Mechanical Systems Engineering, Escola Politecnica, 
University of Sao Paulo, Brazil. E-mail: tarchess@usp.br}

\vspace{24pt}

% \begin{multicols}{1}

\begin{abstract}


\vspace{10pt}

\noindent
KEYWORDS: {Dynamic balancing, serial mechanisms}
\end{abstract}



\input{EXTRAS/symbols}


%--------------------INTRODUCTION--------------------%

\section{Introduction and literature review}\label{S01}


%--------------------METHODOLOGY--------------------%

\section{Mothodology}\label{S02}

\subsection{Dynamic Model}\label{S02-1}

O modelo din\^{a}mico de um mecanismo serial pode ser escrito da seguinte maneira:
\begin{equation}
\mM\ssh (\mq\ssh) \ddot{\mq}\ssh + \mv\ssh(\mq\ssh,\dot{\mq}\ssh) + \mg\ssh (\mq\ssh) = \mu
\end{equation}

Sendo $\mq\ssh$ um conjunto de coordenadas generalizadas independentes, cujos elementos s\~{a}o os deslocamentos relativos das juntas e $\mu$ os esfor\c{c}os generalizados nas dire\c{c}\~oes das quasi-velocidades independentes $\mp\ssh = \dot{\mq}\ssh$.

Para realizar o balanceamento din\^{a}mico de um mecanismo serial, utilizando abordagem proposta, \'{e} necess\'{a}rio primeiro obter o modelo do mecanismo desbalanceado. Como em um mecanismo serial \'{e} poss\'{i}vel de expressar todas as velocidades lineares absolutas dos centros de massa das barras e todas as velocidades angulares absolutas das barras em fun\c{c}\~ao de $\mq\ssh$ e  $\dot{\mq}\ssh$, o modelo din\^{a}mico pode ser obtido sem grandes dificuldades utilizando m\'{e}todos de mec\'{a}nica anal\'{i}tica, como Lagrange, Kane e Orsino, aliados a programas ou bibliotecas de linguagens de programa\c{c}\~{a}o que s\~{a}o capazes de utilizar manipula\c{c}\~{a}o simb\'{o}lica, como o Mathematica e o SymPy.


\subsection{Static Balancing}\label{S02-2}

Depois de obtido o modelo din\^{a}mico, realiza-se o balanceamento est\'{a}tico encontrando as posi\c{c}\~{o}es dos centros de massa das barras que fazem com que $\mg\ssh = \mzr$. Isso \'{e} poss\'{i}vel para mecanismos com juntas apenas rotativas e mecanismos com juntas prism\'{a}ticas cuja dire\c{c}\~{o}es s\~{a}o ortogonais \`{a} gravidade. O posicionamento dos centros de massa \'e realizado mecanicamente com o prologamento das barras do mecanismo e adi\c{c}\~ao de contra-pesos.

\subsection{Dynamic Balancing}\label{S02-3}

O balanceamento din\^{a}mico \'{e} obtido acoplando discos girantes ao modelo do mecanismo est\'{a}ticamente balanceado. Isso \'{e} feito utilizando a t\'{e}cnica de acoplamento de subsistemas do M\'{e}todo Orsino.

Seja $\ssM_0$ um subsistema mec\^anico constituido por um mecanismo serial estaticamente balanceado, cuja equa\c{c}\~{a}o de movimento \'e dada pela equa\c{c}\~{a}o (1), com $\mg\ssh = \mzr$. Seja $\ssM_i$ um subsistema mec\^anico constituido de um disco girante que ser\'a acoplado ao mecanismo, cuja equa\c{c}\~{a}o de movimento \'e dada por:
\begin{equation}
\mM\ssh_i \dot{\mp}\ssh + \mv\ssh_i + \mg\ssh_i = \mu_i
\end{equation}
Sendo $\mp\ssh$ um conjunto de quasi-velocidades independentes, cujos elementos s\~{a}o as componentes n\~{a}o nulas do vetor velocidade angular absoluta do disco, escrito em uma base solid\'{a}ria ao disco, e $\mv\ssh_i = \mg\ssh_i = \mu_i = \mzr$. Nesse modelo, s\~ao considerados apenas os efeitos das in\'{e}rcias rotativas, sendo os efeitos da massa do disco considerados na massa e nos momentos de in\'{e}rcia da barra em que o disco for acoplado, efetando tamb\'{e}m no c\'{a}lculo do posicionamento dos contra-pesos, de modo que o mecanismo continue est\'{a}ticamente balanceado.

Supondo que ir\~{a}o ser acoplados $n$ discos ao mecanismo, s\~ao feitas as seguintes defini\c{c}\~oes:

\begin{equation}
\mM' =
\begin{bmatrix}
\mM\ssh &  \mzr  & \ldots & \mzr\\
\mzr  &  \mM\ssh_1 & \ldots & \mzr\\
\vdots & \vdots & \ddots & \vdots\\
\mzr  &   \mzr       &\ldots & \mM\ssh_{n}
\end{bmatrix}
\end{equation}
\begin{equation}
\mv' = \begin{bmatrix}
{\mv\ssh}^\msT & {\mv\ssh_1}^\msT & ... & {\mv\ssh_{n}}^\msT
\end{bmatrix}^\msT
\end{equation}
\begin{equation}
\mg' = \begin{bmatrix}
{\mg\ssh}^\msT & {\mg\ssh_1}^\msT & ... & {\mg\ssh_{n}}^\msT
\end{bmatrix}^\msT
\end{equation}
\begin{equation}
\mp^\circ = \begin{bmatrix}
{\mp\ssh_1}^\msT & ... & {\mp\ssh_{n}}^\msT
\end{bmatrix}^\msT
\end{equation}
\begin{equation}
\mp = \begin{bmatrix}
{\mp\ssh}^\msT & {\mp^\circ}^\msT
\end{bmatrix}^\msT
\end{equation}

Seja $\underline{\mp}^\circ$ o vetor $\mp^\circ$ escrito em fun\c{c}\~{a}o de $\mq\ssh$ e $\mp\ssh$, ou seja:

\begin{equation}
\mp^\circ = \underline{\mp}^\circ(\mq\ssh, \mp\ssh) 
\end{equation}

Definimos a seguinte matriz das restri\c{c}\~{o}es cinem\'{a}ticas:

\begin{equation}
\mC =
\begin{bmatrix}
\mone \\
\displaystyle\frac{\partial \underline{\mp}^\circ}{\partial \mp\ssh}
\end{bmatrix}
\end{equation}

O modelo din\^{a}mico do mecanismo serial com os discos acoplados, \'{e} dado por:
\begin{equation}
{\mM'}\ssh (\mq\ssh) \ddot{\mq}\ssh + {\mv'}\ssh(\mq\ssh,\dot{\mq}\ssh) + {\mg'}\ssh (\mq\ssh) = \mu
\end{equation}

Sendo:
\begin{equation}
{\mM'}\ssh = \mC^\msT \mM' \mC
\end{equation}
\begin{equation}
{\mv'}\ssh = \mC^\msT ( \mM' \dot{\mC} \dot{\mq}\ssh + \mv')
\end{equation}
\begin{equation}
{\mg'}\ssh = \mC^\msT \mg'
\end{equation}

O balanceamento din\^{a}mico \'{e} obtido encontrando as rela\c{c}\~{o}es entre os par\^{a}metros do sistema que tornam a matriz ${\mM'}\ssh$ diagonal e o vetor ${\mv'}\ssh$ nulo.


 
%--------------------EXAMPLE---------------------%

\section{Applying the technique}\label{S03}

For a 3-DOF serial mechanism:
\begin{equation}
\mM\ssh = 
\begin{bmatrix}
D_{11} & D_{12} & D_{13} \\
D_{12} & D_{22} & D_{23} \\
D_{13} & D_{23} & D_{33} \\
\end{bmatrix}
\end{equation}
\begin{equation}
\mv\ssh = 
\begin{bmatrix}
D_{111} & D_{122} & D_{133} \\
D_{211} & D_{222} & D_{233} \\
D_{311} & D_{322} & D_{333} \\
\end{bmatrix}
\begin{bmatrix}
\dot{q}_1^2 \\
\dot{q}_2^2 \\
\dot{q}_3^2 \\
\end{bmatrix}
+
2\begin{bmatrix}
D_{112} & D_{113} & D_{123} \\
D_{212} & D_{213} & D_{223} \\
D_{312} & D_{313} & D_{323} \\
\end{bmatrix}
\begin{bmatrix}
\dot{q}_1 \dot{q}_2 \\
\dot{q}_1 \dot{q}_3 \\
\dot{q}_2 \dot{q}_3 \\
\end{bmatrix}
\end{equation}
\begin{equation}
\mg\ssh =
\begin{bmatrix}
D_1 &
D_2 &
D_3
\end{bmatrix}^\top
\end{equation}
\begin{equation}
\mq\ssh =
\begin{bmatrix}
q_1 &
q_2 &
q_3
\end{bmatrix}^\top
\end{equation}
\begin{equation}
\mu =
\begin{bmatrix}
u_1 &
u_2 &
u_3
\end{bmatrix}^\top
\end{equation}

For a rotational joint we call $q_i = \theta_i$ and $u_i = \tau_i$, and for a prismatic joint we call $q_i = d_i$ and $u_i = f_i$.

\subsection{3-DOF RRR planar serial mechanism}\label{S03-1}

\begin{equation}
\begin{cases}
D_1 = g[ (m_1 l_{g_1} + m_2 l_1 + m_3 l_1 ) \ccos(\theta_1) + (m_2 l_{g_2} + m_3 l_2) \ccos(\theta_1 + \theta_2) + m_3 l_{g_3} \ccos(\theta_1 + \theta_2 + \theta_3) ] \\
D_2 = g[  (m_2 l_{g_2} + m_3 l_2) \ccos(\theta_1 + \theta_2) + m_3 l_{g_3} \ccos(\theta_1 + \theta_2 + \theta_3) ] \\
D_3 = g[   m_3 l_{g_3} \ccos(\theta_1 + \theta_2 + \theta_3) ] \\
\end{cases}
\end{equation} 

Static balancing:
\begin{equation}
\begin{cases}
D_1 = 0 \\
D_2 = 0 \\
D_3 = 0 \\
\end{cases}
\Rightarrow
\begin{cases}
l_{g_1} = -\frac{l_1(m_2 + m_3)}{m_1} \\
l_{g_2} = -\frac{l_2 m_3}{m_2} \\
l_{g_3} = 0 \\
\end{cases}
\end{equation}

Static balanced mechanism:
\begin{equation}
\begin{cases}
D_{11} = J_{x_1} + J_{x_2} + J_{x_3} + m_2 l_1^2 + m_3 (l_1^2 + l_2^2) + \frac{l_1^2 (m_2 + m_3)^2}{m_1} + \frac{l_2^2 m_3^2}{m_2} \\
D_{22} = J_{x_2} + J_{x_3} + m_3 l_2^2 + \frac{l_2^2 m_3^2}{m_2} \\
D_{33} = J_{x_3} \\
D_{12} = D_{22} \\
D_{13} = D_{23} = D_{33} \\
\mv\ssh = \mzr \\
\mg\ssh = \mzr
\end{cases}
\end{equation}

Coupling 4 discs: \\

Planar disc models: 
\begin{equation}
\mM\ssh_i = \begin{bmatrix} J_{x_{i+3}} \end{bmatrix}; \; \mp\ssh_i = \begin{bmatrix} \omega_{x_{i+3}} \end{bmatrix}, \; i = 1, 2, 3, 4
\end{equation}

Quasi-velocities constraints:

\begin{equation}
\begin{cases}
\omega_{x_4} = \omega_{x_1} + \dot{\theta}_2 \\
\omega_{x_5} = \omega_{x_1} + \beta\dot{\theta}_2 \\
\omega_{x_6} = \omega_{x_2} + \dot{\theta}_3 \\
\omega_{x_7} = \omega_{x_2} + \gamma\dot{\theta}_3 \\
\end{cases}
\Rightarrow
\begin{cases}
\omega_{x_4} = \dot{\theta}_1 + \dot{\theta}_2 \\
\omega_{x_5} = \dot{\theta}_1 + \beta\dot{\theta}_2 \\
\omega_{x_6} = \dot{\theta}_1 + \dot{\theta}_2 + \dot{\theta}_3 \\
\omega_{x_7} = \dot{\theta}_1 + \dot{\theta}_2 + \gamma\dot{\theta}_3 \\
\end{cases}
\Rightarrow
\underline{\mp}^\circ = 
\begin{bmatrix}
\dot{\theta}_1 + \dot{\theta}_2 \\
\dot{\theta}_1 + \beta\dot{\theta}_2 \\
\dot{\theta}_1 + \dot{\theta}_2 + \dot{\theta}_3 \\
\dot{\theta}_1 + \dot{\theta}_2 + \gamma\dot{\theta}_3 \\
\end{bmatrix}
\end{equation}

\begin{equation}
\mC =
\begin{bmatrix}
\mone \\
\displaystyle\frac{\partial \underline{\mp}^\circ}{\partial \mp\ssh}
\end{bmatrix}  =
\begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1 \\
1 & 1     & 0 \\
1 & \beta & 0 \\
1 & 1     & 1 \\
1 & 1     & \gamma \\
\end{bmatrix} 
\end{equation}

\begin{equation}
\begin{cases}
D'_{11} = D_{11} + J_{x_4} + J_{x_5} + J_{x_6} + J_{x_7} \\
D'_{22} = D_{22} + J_{x_4} + J_{x_5} \beta^2 + J_{x_6} + J_{x_7} \\
D'_{33} = D_{33} + J_{x_6} + J_{x_7} \gamma^2 \\
D'_{12} = D_{12} + J_{x_4} + J_{x_5} \beta + J_{x_6} + J_{x_7} \\
D'_{13} = D_{13} + J_{x_6} + J_{x_7} \gamma  \\
D'_{23} = D'_{13}\\
{\mv'}\ssh = \mzr \\
\end{cases}
\end{equation}

Dynamic balancing:
\begin{equation}
\begin{cases}
D'_{12} = 0 \\
D'_{13} = 0 \\
\end{cases}
\Rightarrow
\begin{cases}
\beta = -\frac{J_{x_2} + J_{x_3} + J_{x_4} + J_{x_6} + J_{x_7} + m_3 l_2^2 + \frac{m_3^2 l_2^2}{m_2}}{J_{x_5}} \\
\gamma = -\frac{J_{x_3} + J_{x_6}}{J_{x_7}} \\
\end{cases}
\end{equation}

Dynamic balanced mechanism:
\begin{equation}
\begin{cases}
\tau_1 = k_1 \ddot{\theta}_1 \\
\tau_2 = k_2 \ddot{\theta}_2 \\
\tau_3 = k_3 \ddot{\theta}_3 \\
\end{cases}
\end{equation}

Being:
\begin{equation}
\begin{cases}
k_1 = J_{x_1} + J_{x_2} + J_{x_3} + J_{x_4} + J_{x_5} + J_{x_6} + J_{x_7} + m_2 l_1^2 + m_3 (l_1^2 + l_2^2) + \frac{l_1^2 (m_2 + m_3)^2}{m_1} + \frac{l_2^2 m_3^2}{m_2} \\
k_2 = J_{x_2} + J_{x_3} + J_{x_4} + J_{x_6} + J_{x_7} + m_3 l_2^2 + \frac{l_2^2 m_3^2}{m_2} + \frac{\big(J_{x_2} + J_{x_3} + J_{x_4} + J_{x_6} + J_{x_7} + m_3 l_2^2 + \frac{m_3^2 l_2^2}{m_2}\big)^2}{J_{x_5}} \\
k_3 = \frac{(J_{x_3}+J_{x_6})(J_{x_3}+J_{x_6}+J_{x_7})}{J_{x_7}} \\
\end{cases}
\end{equation}

\subsection{3-DOF RRR spatial serial mechanism} \label{S03-2}

\begin{equation}
\begin{cases}
D_1 = 0 \\
D_2 = g[ (m_2 l_{g_2} + m_3 l_2  ) \ccos(\theta_2) + m_3 l_{g_3} \ccos(\theta_2 + \theta_3) ]  \\
D_3 = g[ m_3 l_{g_3} \ccos(\theta_2 + \theta_3)  ] \\
\end{cases}
\end{equation} 

Static balancing:
\begin{equation}
\begin{cases}
D_2 = 0 \\
D_3 = 0 \\
\end{cases}
\Rightarrow
\begin{cases}
l_{g_2} = -\frac{l_2 m_3}{m_2} \\
l_{g_3} = 0 \\
\end{cases}
\end{equation}

Static balanced mechanism:
\begin{equation}
\begin{cases}
D_{11} = J_{y_2}\ssin^2(\theta_2) + J_{y_3}\ssin^2(\theta_2+\theta_3) + J_{z_1} + J_{z_2}\ccos^2(\theta_2) + J_{z_3}\ccos^2(\theta_2+\theta_3) + m_3 (l_1 + l_2 \ccos(\theta_2))^2 + \frac{(m_2 l_1 - m_3 l_2 \ccos(\theta_2))^2}{m_2} \\
D_{22} = J_{x_2} + J_{x_3} + m_2 l_2^2 + \frac{l_2^2 m_3^2}{m_2} \\
D_{33} = J_{x_3} \\
D_{12} = D_{13} = 0 \\
D_{23} = D_{33} \\
D_{211} = -\frac{1}{2} \Big( \big( J_{y_2} - J_{z_2} \big) \ssin(2\theta_2) + \big(J_{y_3} - J_{z_3} - m_3 l_2^2 ( 1 + \frac{m_3}{m_2} )\big)\ssin(2\theta_2+2\theta_3)    \Big) \\
D_{311} = \frac{1}{2} \Big( \big(J_{z_3} - J_{y_3} \big)\ssin(2\theta_2+2\theta_3) \Big) \\
D_{111} = D_{122} = D_{133} = D_{222} = D_{233} = D_{322} = D_{333} = 0 \\
D_{112} = - D_{211} \\
D_{113} = - D_{311} \\
D_{123} = D_{212} = D_{213} = D_{223} = D_{312} = D_{313} = D_{323} = 0 \\
\mg = \mzr
\end{cases}
\end{equation}

Coupling 2 discs: \\

Spatial disc models: 
\begin{equation}
\mM\ssh_i = \begin{bmatrix} J_{x_{i+3}} & 0 & 0 \\ 0 & J_{y_{i+3}} & 0 \\ 0 & 0 & J_{z_{i+3}} \end{bmatrix}; \; \mp\ssh_i = \begin{bmatrix} \omega_{x_{i+3}} \\ \omega_{y_{i+3}} \\ \omega_{z_{i+3}} \end{bmatrix}, \; i = 1, 2
\end{equation}

Quasi-velocities constraints:

\begin{equation}
\begin{cases}
\nvct{\vomega_{\scriptscriptstyle 4}}_{\ttB_4} = \nvct{\mone}_{\ttB_4 \rl \ttB_2} \nvct{\vomega_{\scriptscriptstyle 2}}_{\ttB_2} + \begin{bmatrix} \dot{\theta}_3 \\ 0 \\0 \end{bmatrix} \\
\nvct{\vomega_{\scriptscriptstyle 5}}_{\ttB_5} = \nvct{\mone}_{\ttB_5 \rl \ttB_2} \nvct{\vomega_{\scriptscriptstyle 2}}_{\ttB_2} + \begin{bmatrix} \beta\dot{\theta}_3 \\ 0 \\0 \end{bmatrix} \\
\end{cases}
\Rightarrow
\begin{cases}
\omega_{x_4} = \dot{\theta}_2 + \dot{\theta}_3 \\
\omega_{y_4} = (\dot{\theta}_1 \ssin(\theta_2))\ccos(\theta_3) + (\dot{\theta}_1 \ccos(\theta_2))\ssin(\theta_3) \\
\omega_{z_4} = -(\dot{\theta}_1 \ssin(\theta_2))\ssin(\theta_3) + (\dot{\theta}_1 \ccos(\theta_2))\ccos(\theta_3) \\
\omega_{x_5} = \dot{\theta}_2 + \beta\dot{\theta}_3 \\
\omega_{y_5} = (\dot{\theta}_1 \ssin(\theta_2))\ccos(\beta\theta_3) + (\dot{\theta}_1 \ccos(\theta_2))\ssin(\beta\theta_3) \\
\omega_{z_5} = -(\dot{\theta}_1 \ssin(\theta_2))\ssin(\beta\theta_3) + (\dot{\theta}_1 \ccos(\theta_2))\ccos(\beta\theta_3) \\
\end{cases}
\end{equation}

\begin{equation}
\Rightarrow
\underline{\mp}^\circ = 
\begin{bmatrix}
\dot{\theta}_2 + \dot{\theta}_3 \\
\dot{\theta}_1 \ssin(\theta_2+\theta_3) \\
\dot{\theta}_1 \ccos(\theta_2+\theta_3) \\
\dot{\theta}_2 + \beta\dot{\theta}_3 \\
\dot{\theta}_1 \ssin(\theta_2+\beta\theta_3) \\
\dot{\theta}_1 \ccos(\theta_2+\beta\theta_3) \\
\end{bmatrix}
\end{equation}

\begin{equation}
\mC =
\begin{bmatrix}
\mone \\
\displaystyle\frac{\partial \underline{\mp}^\circ}{\partial \mp\ssh}
\end{bmatrix}  =
\begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1 \\
0 & 1 & 1 \\
\ssin(\theta_2+\theta_3) & 0 & 0 \\
\ccos(\theta_2+\theta_3) & 0 & 0 \\
0 & 1 & \beta \\
\ssin(\theta_2+\beta\theta_3) & 0 & 0 \\
\ccos(\theta_2+\beta\theta_3) & 0 & 0 \\
\end{bmatrix} 
\end{equation}

\begin{equation}
\begin{cases}
D'_{11} = D_{11} + J_{y_4}\ssin^2(\theta_2+\theta_2) + J_{y_5}\ssin^2(\beta\theta_2+\theta_2) + J_{z_4}\ccos^2(\theta_2+\theta_2) + J_{z_5}\ccos^2(\beta\theta_2+\theta_2) \\
D'_{22} = D_{22} + J_{x_4} + J_{x_5} \\
D'_{33} = D_{33} + J_{x_4} + J_{x_5} \beta^2\\
D'_{12} = D'_{13} = 0\\
D'_{23} = D_{23} + J_{x_4} + J_{x_5} \beta \\
D'_{211} = D_{211} \\
D'_{311} = D_{311} \\
D'_{111} = D'_{122} = D'_{133} = D'_{222} = D'_{233} = D'_{322} = D'_{333} = 0 \\
D'_{112} = D_{112} +  \frac{1}{4} \Big( \big(J_{y_4} - J_{z_4}\big)\ssin(2\theta_2+2\theta_3) + \big(J_{y_5} - J_{z_5}\big)\ssin(2\beta\theta_2+2\theta_3) \Big) \\
D'_{113} =  D_{113} + \frac{1}{4} \Big( (J_{y_4} - J_{z_4})\ssin(2\theta_2+2\theta_3) + (J_{y_5} - J_{z_5})\ssin(2\beta\theta_2+2\theta_3) \Big) \\
D'_{123} = D'_{212} = D'_{213} = D'_{223} = D'_{312} = D'_{313} = D'_{323} = 0 \\
\end{cases}
\end{equation}

Dynamic balancing:
\begin{equation}
\begin{cases}
D'_{23} = 0 \\
D'_{211} = 0 \\
D'_{311} = 0 \\
D'_{112} = 0 \\
D'_{113} = 0 \\
\end{cases}
\Rightarrow
\begin{cases}
\beta = -\frac{J_{x_3}+J_{x_4}}{J_{x_5}} \\
J_{y_2} = J_{z_2} \\
J_{y_3} = J_{z_3} + m_3 l_2^2 ( 1 + \frac{m_3}{m_2} )\\
J_{y_4} = J_{z_4} \\
J_{y_5} = J_{z_5} \\
\end{cases}
\end{equation}

Dynamic balanced mechanism:
\begin{equation}
\begin{cases}
\tau_1 = k_1 \ddot{\theta}_1 \\
\tau_2 = k_2 \ddot{\theta}_2 \\
f_3 = k_3 \ddot{d}_3 \\
\end{cases}
\end{equation}

Being:
\begin{equation}
\begin{cases}
k_1 = J_{z_1} + J_{z_2} + J_{z_3} + J_{z_4} + J_{z_5} + m_2 l_1^2 + m_3 (l_1^2 + l_2^2) + \frac{l_1^2 m_3^2}{m_2} \\
k_2 =  J_{x_2} + J_{x_3} + J_{x_4} + J_{x_5} + m_3 l_2^2 + \frac{l_1^2 m_3^2}{m_2}\\
k_3 = \frac{(J_{x_3}+J_{x_4})(J_{x_3}+J_{x_4}+J_{x_5})}{J_{x_5}} \\
\end{cases}
\end{equation}

\subsection{3-DOF RRP spatial serial mechanism (SCARA)} \label{S03-2}

\begin{equation}
\begin{cases}
D_1 = g[ (m_1 l_{g_1} + m_2 l_1 + m_3 l_1 ) \ccos(\theta_1) + m_2 l_{g_2} \ccos(\theta_1+\theta_2) ] \\
D_2 = g[ m_2 l_{g_2} \ccos(\theta_1+\theta_2)  ] \\
D_3 = 0 \\
\end{cases}
\end{equation} 

Static balancing:
\begin{equation}
\begin{cases}
D_1 = 0 \\
D_2 = 0 \\
\end{cases}
\Rightarrow
\begin{cases}
l_{g_1} = -\frac{l_1 (m_2+m_3)}{m_1} \\
l_{g_2} = 0 \\
\end{cases}
\end{equation}

Static balanced mechanism:
\begin{equation}
\begin{cases}
D_{11} = J_{x_1} + J_{x_2} + J_{x_3} + m_2 l_1^2 + m_3 l_1^2 + \frac{l_1^2 (m_2 + m_3)^2}{m_1} \\
D_{22} = J_{x_2} + J_{x_3} \\
D_{33} = m_3 \\
D_{12} = D_{22} \\
D_{13} = D_{23} = 0 \\
\mv\ssh = \mzr \\
\mg\ssh = \mzr
\end{cases}
\end{equation}

Coupling 2 discs: \\

Planar disc models: 
\begin{equation}
\mM\ssh_i = \begin{bmatrix} J_{x_{i+3}} \end{bmatrix}; \; \mp\ssh_i = \begin{bmatrix} \omega_{x_{i+3}} \end{bmatrix}, \; i = 1, 2
\end{equation}

Quasi-velocities constraints:

\begin{equation}
\begin{cases}
\omega_{x_4} = \omega_{x_1} + \dot{\theta}_2 \\
\omega_{x_5} = \omega_{x_1} + \beta\dot{\theta}_2 \\
\end{cases}
\Rightarrow
\begin{cases}
\omega_{x_4} = \dot{\theta}_1 + \dot{\theta}_2 \\
\omega_{x_5} = \dot{\theta}_1 + \beta\dot{\theta}_2 \\
\end{cases}
\Rightarrow
\overline{\mp} = 
\begin{bmatrix}
\dot{\theta}_1 + \dot{\theta}_2 \\
\dot{\theta}_1 + \beta\dot{\theta}_2 \\
\end{bmatrix}
\end{equation}

\begin{equation}
\mC =
\begin{bmatrix}
\mone \\
\displaystyle\frac{\partial \underline{\mp}^\circ}{\partial \mp\ssh}
\end{bmatrix}  =
\begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1 \\
1 & 1     & 0 \\
1 & \beta & 0 \\
\end{bmatrix} 
\end{equation}

\begin{equation}
\begin{cases}
D'_{11} = D_{11} + J_{x_4} + J_{x_5} \\
D'_{22} = D_{22} + J_{x_4} + J_{x_5} \beta^2 \\
D'_{33} = D_{33} \\
D'_{12} = D_{12} + J_{x_4} + J_{x_5} \beta \\
D'_{13} = 0 \\
D'_{23} = 0\\
{\mv'}\ssh = \mzr \\
\end{cases}
\end{equation}

Dynamic balancing:
\begin{equation}
D'_{12} = 0 \Rightarrow \beta = -\frac{J_{x_2}+J_{x_3}+J_{x_4}}{J_{x_5}}
\end{equation}

Dynamic balanced mechanism:
\begin{equation}
\begin{cases}
\tau_1 = k_1 \ddot{\theta}_1 \\
\tau_2 = k_2 \ddot{\theta}_2 \\
f_3 = k_3 \ddot{d}_3 \\
\end{cases}
\end{equation}

Being:
\begin{equation}
\begin{cases}
k_1 = J_{x_1} + J_{x_2} + J_{x_3} + J_{x_4} + J_{x_5} + m_2 l_1^2 + m_3 l_1^2 + \frac{l_1^2 (m_2 + m_3)^2}{m_1} \\
k_2 = \frac{(J_{x_2}+J_{x_3}+J_{x_4})(J_{x_2}+J_{x_3}+J_{x_4}+J_{x_5})}{J_{x_5}} \\
k_3 = m_3 \\
\end{cases}
\end{equation}

%--------------------CONCLUSIONS--------------------%

%\newpage

\section{Conclusions}\label{S04}


%--------------------ACKNOWLEDGMENTS--------------------%

%\section*{Acknowledgments}


%--------------------BIBLIOGRAPHY--------------------%

% \newpage
\phantomsection 
\input{EXTRAS/bibliography}


% \end{multicols}


\end{document}

