#include "Oversample8xClass.h"

Oversample8xClass::Oversample8xClass(int N) //Construtor da classe pai
{
	this->N = N;
	y.zeros(8*N);

	H = mat(" 0.001882625446606  -0.002710089534866   0.000528221487907   0.116362366467962   0.014596275528642  -0.007805743254415   0.003894924369314  -0.001688091512466;  0.000312944378303   0.001702733514889  -0.010084104330975   0.110845064614024   0.031380665774813  -0.012937335688846   0.005639138698702  -0.002873541303131; -0.001276523364462   0.004971543960620  -0.016918850194126   0.100319469167197   0.049772267353074  -0.017279257145356   0.007023009804036  -0.001614950193983; -0.001720503037984   0.006921079864528  -0.020055571780079   0.085738234601382   0.068393924114215  -0.019939669133575   0.007519008110854  -0.002712118358723; -0.002712118358723   0.007519008110854  -0.019939669133575   0.068393924114215   0.085738234601382  -0.020055571780079   0.006921079864528  -0.001720503037984; -0.001614950193983   0.007023009804036  -0.017279257145356   0.049772267353074   0.100319469167197  -0.016918850194126   0.004971543960620  -0.001276523364462; -0.002873541303131   0.005639138698702  -0.012937335688846   0.031380665774813   0.110845064614024  -0.010084104330975   0.001702733514889   0.000312944378303; -0.001688091512466   0.003894924369314  -0.007805743254415   0.014596275528642   0.116362366467962   0.000528221487907  -0.002710089534866   0.001882625446606");

	ic.zeros(7);
	u_ic.zeros(N+7);
}

Oversample8xClass::~Oversample8xClass()
{
	y.clear();
	H.clear();
	ic.clear();
	u_ic.clear();
}

void Oversample8xClass::Oversample8x(vec *u)
{
	u_ic = 8*join_vert(ic,u[0]);

	for(int i = 0; i < N;i++)
	{
		y.subvec(8*i,8*i+7) = H*u_ic.subvec(i,i+7);
	}
	ic = u[0].subvec(N-7,N-1);
}